services:
  api:
    build:
      context: ../../src/API
      dockerfile: Dockerfile
    image: landalf-api:latest
    container_name: api
    network_mode: host
    environment:
      - ASPNETCORE_URLS=http://+:5000
      - Cors__FrontendUrl=http://localhost:8080
      # Docker Desktop (Windows/macOS): Uncomment and set your LAN broadcast address.
      # - WOL_BROADCASTS=192.168.178.255
      - Serilog__MinimumLevel__Default=Information
      - Serilog__MinimumLevel__Override__Microsoft.AspNetCore=Warning
      - Serilog__MinimumLevel__Override__Microsoft.EntityFrameworkCore=Warning
    volumes:
      - api-data:/app/LANdalf_Data
      - api-logs:/app/logs
    restart: unless-stopped

  ui:
    build:
      context: ../../src/UI
      dockerfile: Dockerfile
    image: landalf-ui:latest
    container_name: ui
    network_mode: host
    depends_on:
      - api
    restart: unless-stopped

volumes:
  api-data:
  api-logs:
